# Exercise 03 — Проверка входных/выходных потоков данных
## Задача 2: Доставка заказов (Delivery Service)

### Таблица входных/выходных потоков данных

| № | Внешняя сущность | Направление потока | Название потока | Описание данных | Примечания |
|---|------------------|-------------------|-----------------|-----------------|------------|
| 1 | Курьер | Вход | Запрос на просмотр заказов | Фильтры (статус, район) | Через мобильное приложение |
| 2 | Курьер | Выход | Список доступных заказов | ID заказа, адрес забора, адрес доставки, сроки, сумма | Через мобильное приложение |
| 3 | Курьер | Вход | Запрос на бронирование заказа | ID заказа | Через мобильное приложение |
| 4 | Курьер | Выход | Подтверждение бронирования | ID заказа, статус "забронирован", детали заказа | Через мобильное приложение |
| 5 | Курьер | Вход | Подтверждение забора заказа | ID заказа, время забора, фото (опционально) | Через мобильное приложение |
| 6 | Курьер | Выход | Подтверждение забора в системе | ID заказа, статус "в доставке" | Через мобильное приложение |
| 7 | Курьер | Вход | Подтверждение доставки заказа | ID заказа, время доставки, подпись клиента (опционально) | Через мобильное приложение |
| 8 | Курьер | Выход | Подтверждение доставки в системе | ID заказа, статус "доставлен" | Через мобильное приложение |
| 9 | Курьер | Вход | Запрос на просмотр оплаты | ID курьера, период | Через мобильное приложение |
| 10 | Курьер | Выход | Информация о начисленной оплате | Период, список заказов, сумма оплаты, статус выплаты | Через мобильное приложение |
| 11 | Диспетчер | Вход | Запрос на просмотр всех заказов | Фильтры (статус, курьер, период) | Через веб-интерфейс |
| 12 | Диспетчер | Выход | Список всех заказов | ID заказа, статус, курьер, адреса, сроки | Через веб-интерфейс |
| 13 | Диспетчер | Вход | Запрос на просмотр курьеров | Фильтры (статус, район) | Через веб-интерфейс |
| 14 | Диспетчер | Выход | Список курьеров с статусами | ID курьера, ФИО, статус, текущий заказ, местоположение | Через веб-интерфейс |
| 15 | Диспетчер | Вход | Команда на переназначение заказа | ID заказа, ID нового курьера | Через веб-интерфейс |
| 16 | Диспетчер | Выход | Подтверждение переназначения | ID заказа, старый курьер, новый курьер | Через веб-интерфейс |
| 17 | Диспетчер | Вход | Запрос на отчеты | Параметры отчета (период, курьер, статус) | Через веб-интерфейс |
| 18 | Диспетчер | Выход | Отчеты о заказах | Статистика по заказам, курьерам, времени доставки | Через веб-интерфейс |
| 19 | Оператор | Вход | Ввод заказа в систему | Данные о заказе: место комплектации, срок комплектации, место доставки, желаемые сроки доставки, поставщик | Через веб-интерфейс |
| 20 | Оператор | Выход | Подтверждение ввода заказа | ID заказа, статус "новый", детали заказа | Через веб-интерфейс |
| 21 | Оператор | Вход | Редактирование заказа | ID заказа, изменения | Через веб-интерфейс |
| 22 | Оператор | Выход | Подтверждение редактирования | ID заказа, обновленные данные | Через веб-интерфейс |
| 23 | Администратор | Вход | Регистрация курьера | ФИО, телефон, документы, данные для доступа | Через веб-интерфейс |
| 24 | Администратор | Выход | Подтверждение регистрации | ID курьера, данные для входа | Через веб-интерфейс |
| 25 | Администратор | Вход | Назначение прав доступа | ID пользователя, роль, права | Через веб-интерфейс |
| 26 | Администратор | Выход | Подтверждение назначения прав | ID пользователя, список прав | Через веб-интерфейс |
| 27 | Администратор | Вход | Запрос на просмотр пользователей | Фильтры (роль, статус) | Через веб-интерфейс |
| 28 | Администратор | Выход | Список пользователей | ID пользователя, ФИО, роль, права, статус | Через веб-интерфейс |
| 29 | Магазины и ПП | Вход | Передача информации о заказе | Данные о заказе (любым способом) | Через оператора (на первом этапе) |
| 30 | Магазины и ПП | Выход | Подтверждение получения заказа | ID заказа, статус "принят в обработку" | Через оператора |
| 31 | Магазины и ПП | Вход | Запрос на статус доставки | ID заказа | Через оператора |
| 32 | Магазины и ПП | Выход | Статус доставки заказа | ID заказа, текущий статус, курьер, время доставки | Через оператора |
| 33 | Бухгалтерия | Вход | Запрос на данные о поступивших заказах | Период, параметры фильтрации | Через интеграцию |
| 34 | Бухгалтерия | Выход | Данные о поступивших заказах | ID заказа, поставщик, сумма, дата поступления | Через интеграцию (автоматически) |
| 35 | Бухгалтерия | Вход | Запрос на данные о доставке заказа | Период, параметры фильтрации | Через интеграцию |
| 36 | Бухгалтерия | Выход | Данные о доставке заказа | ID заказа, курьер, статус доставки, время доставки | Через интеграцию (автоматически) |
| 37 | Бухгалтерия | Вход | Данные о начисленной оплате курьерам | ID курьера, период, сумма оплаты | Через интеграцию |
| 38 | Бухгалтерия | Выход | Подтверждение получения данных об оплате | Статус обработки | Через интеграцию |
| 39 | Система | Выход | Автоматическая передача данных о заказах | Данные о поступивших заказах | В систему бухгалтерии |
| 40 | Система | Выход | Автоматическая передача данных о доставке | Данные о доставке заказов | В систему бухгалтерии |

### Проверка соответствия контекстной диаграмме

#### Входные потоки (от внешних сущностей к системе):
✅ Все действия пользователей (курьеры, диспетчер, оператор, администратор) преобразованы в входные потоки данных  
✅ Управляющие воздействия (переназначение заказов, управление пользователями) учтены  
✅ Интеграции с внешними системами (бухгалтерия) учтены  
✅ Данные от поставщиков (магазины/ПП) через оператора учтены  

#### Выходные потоки (от системы к внешним сущностям):
✅ Все ответы системы пользователям учтены  
✅ Данные для внешних систем (бухгалтерия) учтены  
✅ Информация для поставщиков через оператора учтены  

### Примечания и уточнения

1. **Потоки данных для курьеров:**
   - Все взаимодействие через мобильное приложение
   - Курьер может только просматривать доступные заказы и выполнять действия со своими заказами
   - Информация об оплате отображается в личном кабинете

2. **Потоки данных для диспетчера:**
   - Диспетчер имеет полный доступ к информации о заказах и курьерах
   - Может переназначать заказы между курьерами
   - Получает отчеты для анализа работы

3. **Потоки данных для оператора:**
   - Оператор вводит заказы от магазинов/ПП в едином формате
   - На первом этапе заказы поступают любым способом и конвертируются оператором

4. **Потоки данных для администратора:**
   - Администратор управляет пользователями и правами доступа
   - Имеет доступ к логам и настройкам системы

5. **Потоки данных для магазинов и ПП:**
   - На первом этапе взаимодействие только через оператора
   - В будущем может быть прямой API для передачи заказов

6. **Потоки данных для бухгалтерии:**
   - Автоматическая передача данных о поступивших заказах (для расчета с поставщиками)
   - Автоматическая передача данных о доставке (для расчета оплаты курьеров)
   - Получение данных о начисленной оплате (для отображения в системе)

### Расхождения и уточнения

**Нет расхождений** - все потоки данных соответствуют описанию задачи и контекстной диаграмме.

### Дополнительные потоки, не указанные в задаче, но необходимые:

1. **Аутентификация и авторизация:**
   - Вход: Логин, пароль
   - Выход: Токен доступа, права пользователя

2. **Геолокация курьера:**
   - Вход: Координаты курьера (для отслеживания)
   - Выход: Местоположение курьера на карте (для диспетчера)

3. **Уведомления:**
   - Выход: Push-уведомления курьерам о новых заказах
   - Выход: Уведомления диспетчеру о проблемных ситуациях

4. **Логирование действий:**
   - Внутренний поток: Запись всех действий в систему логирования

